<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StringUtils.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">RetrouvTout Backend</a> &gt; <a href="index.source.html" class="el_package">com.retrouvtout.util</a> &gt; <span class="el_source">StringUtils.java</span></div><h1>StringUtils.java</h1><pre class="source lang-java linenums">// StringUtils.java - Utilitaires de chaînes
package com.retrouvtout.util;

import java.text.Normalizer;
import java.util.Arrays;
import java.util.List;
import java.util.regex.Pattern;

/**
 * Utilitaires pour les chaînes de caractères
 */
<span class="nc" id="L12">public class StringUtils {</span>

<span class="nc" id="L14">    private static final Pattern DIACRITICS_PATTERN = Pattern.compile(&quot;\\p{InCombiningDiacriticalMarks}+&quot;);</span>
    
<span class="nc" id="L16">    private static final List&lt;String&gt; FRENCH_STOP_WORDS = Arrays.asList(</span>
        &quot;le&quot;, &quot;de&quot;, &quot;et&quot;, &quot;à&quot;, &quot;un&quot;, &quot;il&quot;, &quot;être&quot;, &quot;et&quot;, &quot;en&quot;, &quot;avoir&quot;, &quot;que&quot;, &quot;pour&quot;,
        &quot;dans&quot;, &quot;ce&quot;, &quot;son&quot;, &quot;une&quot;, &quot;sur&quot;, &quot;avec&quot;, &quot;ne&quot;, &quot;se&quot;, &quot;pas&quot;, &quot;tout&quot;, &quot;plus&quot;,
        &quot;par&quot;, &quot;grand&quot;, &quot;en&quot;, &quot;me&quot;, &quot;même&quot;, &quot;te&quot;, &quot;des&quot;, &quot;ta&quot;, &quot;mon&quot;, &quot;ton&quot;, &quot;nos&quot;, &quot;vos&quot;
    );

    /**
     * Supprimer les accents d'une chaîne
     */
    public static String removeAccents(String input) {
<span class="nc bnc" id="L26" title="All 2 branches missed.">        if (input == null) return null;</span>
<span class="nc" id="L27">        String normalized = Normalizer.normalize(input, Normalizer.Form.NFD);</span>
<span class="nc" id="L28">        return DIACRITICS_PATTERN.matcher(normalized).replaceAll(&quot;&quot;);</span>
    }

    /**
     * Normaliser une chaîne pour la recherche
     */
    public static String normalizeForSearch(String input) {
<span class="nc bnc" id="L35" title="All 2 branches missed.">        if (input == null) return &quot;&quot;;</span>
<span class="nc" id="L36">        return removeAccents(input.toLowerCase().trim())</span>
<span class="nc" id="L37">                .replaceAll(&quot;[^a-z0-9\\s]&quot;, &quot; &quot;)</span>
<span class="nc" id="L38">                .replaceAll(&quot;\\s+&quot;, &quot; &quot;);</span>
    }

    /**
     * Créer un slug URL-friendly
     */
    public static String createSlug(String input) {
<span class="nc bnc" id="L45" title="All 2 branches missed.">        if (input == null) return &quot;&quot;;</span>
<span class="nc" id="L46">        return removeAccents(input.toLowerCase())</span>
<span class="nc" id="L47">                .replaceAll(&quot;[^a-z0-9\\s]&quot;, &quot;&quot;)</span>
<span class="nc" id="L48">                .replaceAll(&quot;\\s+&quot;, &quot;-&quot;)</span>
<span class="nc" id="L49">                .replaceAll(&quot;^-+|-+$&quot;, &quot;&quot;);</span>
    }

    /**
     * Extraire les mots-clés d'un texte
     */
    public static List&lt;String&gt; extractKeywords(String text) {
<span class="nc bnc" id="L56" title="All 2 branches missed.">        if (text == null) return List.of();</span>
        
<span class="nc" id="L58">        return Arrays.stream(normalizeForSearch(text).split(&quot;\\s+&quot;))</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">                .filter(word -&gt; word.length() &gt; 2)</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">                .filter(word -&gt; !FRENCH_STOP_WORDS.contains(word))</span>
<span class="nc" id="L61">                .distinct()</span>
<span class="nc" id="L62">                .toList();</span>
    }

    /**
     * Tronquer un texte avec ellipses
     */
    public static String truncate(String text, int maxLength) {
<span class="nc bnc" id="L69" title="All 4 branches missed.">        if (text == null || text.length() &lt;= maxLength) {</span>
<span class="nc" id="L70">            return text;</span>
        }
<span class="nc" id="L72">        return text.substring(0, maxLength - 3) + &quot;...&quot;;</span>
    }

    /**
     * Générer un code aléatoire
     */
    public static String generateRandomCode(int length) {
<span class="nc" id="L79">        String chars = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;;</span>
<span class="nc" id="L80">        StringBuilder code = new StringBuilder();</span>
        
<span class="nc bnc" id="L82" title="All 2 branches missed.">        for (int i = 0; i &lt; length; i++) {</span>
<span class="nc" id="L83">            code.append(chars.charAt((int) (Math.random() * chars.length())));</span>
        }
        
<span class="nc" id="L86">        return code.toString();</span>
    }

    /**
     * Masquer un email partiellement
     */
    public static String maskEmail(String email) {
<span class="nc bnc" id="L93" title="All 4 branches missed.">        if (email == null || !email.contains(&quot;@&quot;)) {</span>
<span class="nc" id="L94">            return email;</span>
        }
        
<span class="nc" id="L97">        String[] parts = email.split(&quot;@&quot;);</span>
<span class="nc" id="L98">        String local = parts[0];</span>
<span class="nc" id="L99">        String domain = parts[1];</span>
        
<span class="nc bnc" id="L101" title="All 2 branches missed.">        if (local.length() &lt;= 2) {</span>
<span class="nc" id="L102">            return email;</span>
        }
        
<span class="nc" id="L105">        String maskedLocal = local.charAt(0) + &quot;*&quot;.repeat(local.length() - 2) + local.charAt(local.length() - 1);</span>
<span class="nc" id="L106">        return maskedLocal + &quot;@&quot; + domain;</span>
    }

    /**
     * Masquer un numéro de téléphone partiellement
     */
    public static String maskPhoneNumber(String phone) {
<span class="nc bnc" id="L113" title="All 4 branches missed.">        if (phone == null || phone.length() &lt; 4) {</span>
<span class="nc" id="L114">            return phone;</span>
        }
        
<span class="nc" id="L117">        String cleaned = phone.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">        if (cleaned.length() &lt; 4) {</span>
<span class="nc" id="L119">            return phone;</span>
        }
        
<span class="nc" id="L122">        return cleaned.substring(0, 2) + &quot;*&quot;.repeat(cleaned.length() - 4) + cleaned.substring(cleaned.length() - 2);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>